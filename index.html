<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>3000METER.com - Tempo Kalkulator</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="css/styles.css">
  <link rel="manifest" href="pwa/manifest.json">
  <link rel="icon" type="image/svg+xml" href="assets/stadium.svg">
  
  <meta name="theme-color" content="#dc2626">
  <meta name="description" content="3000METER.com - Profesjonell tempo kalkulator for baneløpere">
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
  <div class="app-container">
    <!-- Minimal Header -->
    <header class="header">
      <h1 class="header-title">3000METER</h1>
      <button id="themeToggle" class="theme-btn" aria-label="Toggle tema">
        <i class="fas fa-moon"></i>
      </button>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Race Setup - Simplified -->
      <section class="race-setup">
        <div class="setup-grid-simple">
          <!-- Distance -->
          <div class="input-group-simple">
            <label>Distanse</label>
            <div class="distance-input-wrapper">
              <input type="number" id="raceDistance" value="3000" min="100" step="any" class="distance-input">
              <span class="unit-label">m</span>
            </div>
            <div class="preset-buttons-compact">
              <button type="button" class="preset-btn-compact" data-distance="800">800m</button>
              <button type="button" class="preset-btn-compact" data-distance="1500">1500m</button>
              <button type="button" class="preset-btn-compact active" data-distance="3000">3000m</button>
              <button type="button" class="preset-btn-compact" data-distance="5000">5000m</button>
              <button type="button" class="preset-btn-compact" data-distance="10000">10000m</button>
            </div>
          </div>

          <!-- Time -->
          <div class="input-group-simple">
            <label>Måltid</label>
            <input type="text" id="goalTime" value="15:00" placeholder="15:00" maxlength="7" class="time-input-simple">
            <div class="adjust-buttons">
              <button type="button" onclick="adjustTime(-10)">−10s</button>
              <button type="button" onclick="adjustTime(-5)">−5s</button>
              <button type="button" onclick="adjustTime(5)">+5s</button>
              <button type="button" onclick="adjustTime(10)">+10s</button>
            </div>
          </div>

          <!-- Strategy -->
          <div class="input-group-simple">
            <label>Strategi</label>
            <div class="strategy-buttons-simple">
              <button class="strategy-btn-simple active" data-strategy="even">Jevnt</button>
              <button class="strategy-btn-simple" data-strategy="neg5p">−5%</button>
              <button class="strategy-btn-simple" data-strategy="pos5p">+5%</button>
              <button class="strategy-btn-simple" data-strategy="progressive">Progresiv</button>
              <button class="strategy-btn-simple" data-strategy="custom">Custom</button>
            </div>
          </div>

          <!-- Calculate Button -->
          <button id="calculateBtn" class="btn-calculate">Beregn</button>
        </div>

        <!-- Advanced Options (Collapsible) -->
        <div id="advancedStrategyOptions" class="advanced-strategy-options" style="display: none;">
          <div class="strategy-controls">
            <div class="strategy-control">
              <label>Progresjonstype</label>
              <select id="progressionType" class="strategy-select">
                <option value="linear">Lineær</option>
                <option value="exponential">Eksponentiell</option>
                <option value="sigmoid">Sigmoid</option>
              </select>
            </div>
            <div class="strategy-control">
              <label>Tempoendring per 400m (sekunder)</label>
              <input type="number" id="paceChange" value="-2" step="0.1" class="strategy-input">
            </div>
            <div class="strategy-control">
              <label>Start Tempo</label>
              <input type="text" id="startPace" value="05:00" placeholder="05:00" class="strategy-input">
            </div>
            <div class="strategy-control">
              <label>Slutt Tempo</label>
              <input type="text" id="endPace" value="05:00" placeholder="05:00" class="strategy-input">
            </div>
          </div>
        </div>
      </section>

      <!-- Track Visualization -->
      <section class="track-section">
        <div class="track-container">
          <svg viewBox="0 0 1600 1000" role="img" aria-label="Bane">
            <defs>
              <filter id="runner-glow">
                <feGaussianBlur stdDeviation="4" result="blur"/>
                <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
            </defs>
            <rect x="0" y="0" width="1600" height="1000" fill="#f8fafc"/>
            <g id="stadium"></g>
            <g id="infield"></g>
            <g id="track-base"></g>
            <g id="lane-boundaries" stroke="#ffffff" stroke-width="3"></g>
            <g id="markers"></g>
            <g id="lane-numbers"></g>
            <g id="runner">
              <circle id="runner-dot" r="12" fill="#007AFF" stroke="#ffffff" stroke-width="4" filter="url(#runner-glow)"/>
            </g>
            <g id="round-indicators"></g>
          </svg>
        </div>

        <!-- Simple Controls -->
        <div class="track-controls-simple">
          <div class="control-group">
            <button id="playPauseBtn" class="control-btn">
              <i class="fas fa-play"></i>
            </button>
            <button id="resetBtn" class="control-btn">
              <i class="fas fa-redo"></i>
            </button>
          </div>
          <div class="status-display">
            <div class="status-item-simple">
              <span class="status-label">Runde</span>
              <span id="currentLapDisplay">1</span>
            </div>
            <div class="status-item-simple">
              <span class="status-label">Distanse</span>
              <span id="currentDistanceDisplay">0m</span>
            </div>
            <div class="status-item-simple">
              <span class="status-label">Tempo</span>
              <span id="currentPaceDisplay">--:--</span>
            </div>
            <div class="status-item-simple">
              <span class="status-label">Fremgang</span>
              <span id="progressPercentDisplay">0%</span>
            </div>
          </div>
          <div class="time-display">
            <span id="largeTargetTimeDisplay">00:00.00 / 15:00</span>
          </div>
        </div>
      </section>

      <!-- Results -->
      <section class="results-section">
        <div class="results-tabs">
          <button class="tab-btn active" data-tab="splits">Deltider</button>
          <button class="tab-btn" data-tab="chart">Graf</button>
        </div>

        <div id="splitsTab" class="tab-content active">
          <div id="cumulativeTimesContainer" class="splits-container">
            <div class="splits-table">
              <div class="table-header">
                <span>200m</span>
                <span>Tid</span>
              </div>
              <div id="cumulativeTimes200m" class="table-body"></div>
            </div>
            <div class="splits-table">
              <div class="table-header">
                <span>400m</span>
                <span>Tid</span>
              </div>
              <div id="cumulativeTimes400m" class="table-body"></div>
            </div>
          </div>
        </div>

        <div id="chartTab" class="tab-content">
          <div class="chart-container">
            <canvas id="paceChart"></canvas>
          </div>
        </div>
      </section>
    </main>

    <!-- Minimal Footer -->
    <footer class="footer">
      <a href="https://github.com/egil10/3000meter" target="_blank" rel="noopener noreferrer">
        <i class="fab fa-github"></i> GitHub
      </a>
    </footer>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/modules/state.js"></script>
  <script src="js/modules/track.js"></script>
  <script src="js/modules/pace-calculator.js"></script>
  <script src="js/modules/animation.js"></script>
  <script src="js/modules/ui.js"></script>
  <script src="js/modules/storage.js"></script>
  <script src="js/modules/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" defer></script>
</body>
</html>
